<!DOCTYPE html>
<html lang="en"><head>
        <title>HTMagical 2.0 Test Document</title>
        <script type="module" src="https://jamesaduncan.github.io/form-template/index.mjs"></script>
        <script type="module" src="https://jamesaduncan.github.io/link-include/index.mjs"></script>
        <script type="module" src="https://jamesaduncan.github.io/button-remove/index.mjs"></script>
        <script type="module" src="./index.mjs"></script>
    </head>
    <body>
        <h1>A DOM-aware webserver</h1>
        <section id="simple-button">
            <script type="module">
                class ClickCounter extends HTMLElement{
                    constructor() {
                        super();
                    }

                    put() {
                        let value = parseInt( this.innerHTML );
                        this.innerHTML = value + 1;
                    }
                }
                customElements.define('click-counter', ClickCounter);
            </script>
            <p>
                The button has been clicked <click-counter>120</click-counter> times.
            </p>
            <button for="click-counter" method="put">Increase Counter</button>
        </section>
        <section>
            <p>
                This button has been clicked <span id="click-counter">84</span> times.
            </p>
            <script>
                (() => {
                    let elem = document.querySelector('#click-counter');
                    elem.put = function() {
                        let value = parseInt( elem.innerHTML );
                        elem.innerHTML = value + 1;
                    }
                })();
            </script>
            <button for="span#click-counter" method="put">Increment Counter</button>
        </section>
        <section>
            <table id="patchable-table" patchable="true">
                <thead>
                    <tr>
                        <th type="col">Name</th>
                        <th type="col">Email</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>John Doe</td>
                        <td>johndoe@example.com</td>
                        <td><button remove="closest" selector="tr">Delete</button></td>
                    </tr>
                    <tr>
                        <td>Bill Smith</td>
                        <td>bill@example.com</td>
                        <td><button remove="closest" selector="tr">Delete</button></td>
                    </tr>
                
            
                
            <tr>
                    <td>Rosie</td>
                    <td>rosie@theduncans.family</td>
                    <td><button remove="closest" selector="tr">Delete</button></td>
                </tr>
                </tbody>                
                <tfoot>
                    <tr>
                        <td><input form="table-row" type="text" name="name"></td>
                        <td><input form="table-row" type="email" name="email"></td>
                        <td><button form="table-row">Add</button></td>
                    </tr>
                </tfoot>
            </table>
            <form id="table-row" template="#table-row-template" action="table tbody"></form>
            <template id="table-row-template">
                <tr>
                    <td><slot name="name"></slot></td>
                    <td><slot name="email"></slot></td>
                    <td><button remove="closest" selector="tr">Delete</button></td>
                </tr>
            </template>
        </section>
        
    
</body></html>